<!DOCTYPE html>
<html lang="en">
    <!-- title -->


    

<!-- keywords -->



<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="AkiraZheng">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="AkiraZheng">
    
        <meta name="keywords" content="hexo,hexo-theme,hexo-blog">
    
    <meta name="description" content="">
    <meta name="description" content="一、CPU执行过程 1.1 CPU基本硬件结构 我们直到，计算机主要是由CPU、内存、I&#x2F;O设备组成的，操作速度CPU Cache &gt; 内存 &gt; 硬盘  CPU Cache有三级缓存，分别是L1 &gt; L2 &gt; L3，L1速度最快、容量最小、价格最昂贵   而CPU是计算机的核心部件，它负责执行指令、控制操作等，其执行速度极快，且速度与时钟周期息息相关。CPU的基本硬件结构如">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统结构及进程管理">
<meta property="og:url" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="一、CPU执行过程 1.1 CPU基本硬件结构 我们直到，计算机主要是由CPU、内存、I&#x2F;O设备组成的，操作速度CPU Cache &gt; 内存 &gt; 硬盘  CPU Cache有三级缓存，分别是L1 &gt; L2 &gt; L3，L1速度最快、容量最小、价格最昂贵   而CPU是计算机的核心部件，它负责执行指令、控制操作等，其执行速度极快，且速度与时钟周期息息相关。CPU的基本硬件结构如">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/Computer_struct.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/CPU_Struct.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/user_kernal_state.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/User_Kernel.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/CruptTable.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/Currpt.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/memory_type.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/process_thread.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/PCB.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/process_state.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/context_switch.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/process_struct.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/process_switch.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/coroutine.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/pipe.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/crrupt.png">
<meta property="og:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/lock.png">
<meta property="article:published_time" content="2024-04-25T09:14:13.000Z">
<meta property="article:modified_time" content="2024-12-25T14:50:16.947Z">
<meta property="article:author" content="AkiraZheng">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/Computer_struct.png">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" href="/assets/yueyue.jpg">
    
    <title>操作系统结构及进程管理 · AkiraZheng&#39;s Time</title>
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
    (function (w) {
        'use strict'
        // rel=preload support test
        if (!w.loadCSS) {
            w.loadCSS = function () {}
        }
        // define on the loadCSS obj
        var rp = (loadCSS.relpreload = {})
        // rel=preload feature support test
        // runs once and returns a function for compat purposes
        rp.support = (function () {
            var ret
            try {
                ret = w.document.createElement('link').relList.supports('preload')
            } catch (e) {
                ret = false
            }
            return function () {
                return ret
            }
        })()

        // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
        // then change that media back to its intended value on load
        rp.bindMediaToggle = function (link) {
            // remember existing media attr for ultimate state, or default to 'all'
            var finalMedia = link.media || 'all'

            function enableStylesheet() {
                link.media = finalMedia
            }

            // bind load handlers to enable media
            if (link.addEventListener) {
                link.addEventListener('load', enableStylesheet)
            } else if (link.attachEvent) {
                link.attachEvent('onload', enableStylesheet)
            }

            // Set rel and non-applicable media type to start an async request
            // note: timeout allows this to happen async to let rendering continue in IE
            setTimeout(function () {
                link.rel = 'stylesheet'
                link.media = 'only x'
            })
            // also enable media after 3 seconds,
            // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
            setTimeout(enableStylesheet, 3000)
        }

        // loop through link elements in DOM
        rp.poly = function () {
            // double check this to prevent external calls from running
            if (rp.support()) {
                return
            }
            var links = w.document.getElementsByTagName('link')
            for (var i = 0; i < links.length; i++) {
                var link = links[i]
                // qualify links to those with rel=preload and as=style attrs
                if (
                    link.rel === 'preload' &&
                    link.getAttribute('as') === 'style' &&
                    !link.getAttribute('data-loadcss')
                ) {
                    // prevent rerunning on link
                    link.setAttribute('data-loadcss', true)
                    // bind listeners to toggle media back
                    rp.bindMediaToggle(link)
                }
            }
        }

        // if unsupported, run the polyfill
        if (!rp.support()) {
            // run once at least
            rp.poly()

            // rerun poly on an interval until onload
            var run = w.setInterval(rp.poly, 500)
            if (w.addEventListener) {
                w.addEventListener('load', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            } else if (w.attachEvent) {
                w.attachEvent('onload', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            }
        }

        // commonjs
        if (typeof exports !== 'undefined') {
            exports.loadCSS = loadCSS
        } else {
            w.loadCSS = loadCSS
        }
    })(typeof global !== 'undefined' ? global : this)
</script>

    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }
</style>

    <link rel="preload" href="/css/style.css?v=20211217" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="/css/dark.css?v=20211217" as="style">
    <link rel="stylesheet" href="/css/dark.css">
    <link rel="stylesheet" href="/css/mobile.css?v=20211217" media="(max-width: 960px)">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js?v=20211217" as="script">
    <link rel="preload" href="/scripts/dark.js?v=20211217" as="script">
    <link rel="preload" href="/font/Oswald-Regular.ttf" as="font" crossorigin>
    <link rel="preload" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" as="font" crossorigin>
    <!-- algolia -->
    
    <!-- 百度统计  -->
    
    <!-- 谷歌统计  -->
    
<meta name="generator" content="Hexo 5.4.1"></head>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ == undefined) {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js" />')
        }
    </script>
    
        <body class="post-body">
    
        <!-- header -->
        <header class="header header-mobile">
    <!-- top read progress line -->
    <div class="header-element">
        <div class="read-progress"></div>
    </div>
    <!-- sidebar menu button -->
    <div class="header-element">
        
            <div class="header-sidebar-menu">
        
            
                <div style="padding-left: 1px;">&#xe775;</div>
            
        </div>
    </div>
    <!-- header actions -->
    <div class="header-actions">
        <!-- theme mode switch button -->
        <span class="header-theme-btn header-element">
            <i class="fas fa-adjust"></i>
        </span>
        <!-- back to home page text -->
        <span class="home-link header-element">
            <a href=/>AkiraZheng's Time.</a>
        </span>
    </div>
    <!-- toggle banner for post layout -->
    
        
            <div class="banner">
        
            <div class="blog-title header-element">
                <a href="/">AkiraZheng&#39;s Time.</a>
            </div>
            <div class="post-title header-element">
                <a href="#" class="post-name">操作系统结构及进程管理</a>
            </div>
        </div>
    
</header>

        <!-- fixed footer -->
        <footer class="footer-fixed">
    <!-- back to top button -->
    <div class="footer-fixed-element">
        
            <div class="back-top back-top-hidden">
        
        
            <div>&#xe639;</div>
        
        </div>
    </div>
</footer>

        <!-- wrapper -->
        <div class="wrapper">
            <div class="site-intro" style="







    height:50vh;

">
    
    <!-- 主页  -->
    
        
    <!-- 404页  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
                操作系统结构及进程管理
            <!-- 404 -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
                
            <!-- 404 -->
            
        </p>
        <!-- 文章页 meta -->
        
            <div class="post-intros">
                <!-- 文章页标签  -->
                
                
                    <div class="post-intro-read">
                        <span>Word count: <span class="post-count word-count">7.6k</span>Reading time: <span class="post-count reading-time">26 min</span></span>
                    </div>
                
                <div class="post-intro-meta">
                    <!-- 撰写日期 -->
                    <span class="iconfont-archer post-intro-calander">&#xe676;</span>
                    <span class="post-intro-time">2024/04/25</span>
                    <!-- busuanzi -->
                    
                        <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                            <span class="iconfont-archer post-intro-busuanzi">&#xe602;</span>
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    
                    <!-- 文章分享 -->
                    <span class="share-wrapper">
                        <span class="iconfont-archer share-icon">&#xe71d;</span>
                        <span class="share-text">Share</span>
                        <ul class="share-list">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
        
    </div>
</div>

            <script>
  // get user agent
  function getBrowserVersions() {
    var u = window.navigator.userAgent
    return {
      userAgent: u,
      trident: u.indexOf('Trident') > -1, //IE内核
      presto: u.indexOf('Presto') > -1, //opera内核
      webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
      iPad: u.indexOf('iPad') > -1, //是否为iPad
      webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
      weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
      uc: u.indexOf('UCBrowser') > -1, //是否为android下的UC浏览器
    }
  }
  var browser = {
    versions: getBrowserVersions(),
  }
  console.log('userAgent: ' + browser.versions.userAgent)

  // callback
  function fontLoaded() {
    console.log('font loaded')
    if (document.getElementsByClassName('site-intro-meta')) {
      document
        .getElementsByClassName('intro-title')[0]
        .classList.add('intro-fade-in')
      document
        .getElementsByClassName('intro-subtitle')[0]
        .classList.add('intro-fade-in')
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in')
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb() {
    if (browser.versions.uc) {
      console.log('UCBrowser')
      fontLoaded()
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular'],
        },
        loading: function () {
          // 所有字体开始加载
          // console.log('font loading');
        },
        active: function () {
          // 所有字体已渲染
          fontLoaded()
        },
        inactive: function () {
          // 字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout')
          fontLoaded()
        },
        timeout: 5000, // Set the timeout to two seconds
      })
    }
  }

  function asyncErr() {
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0]
    o.src = u
    if (cb) {
      o.addEventListener(
        'load',
        function (e) {
          cb(null, e)
        },
        false
      )
    }
    if (err) {
      o.addEventListener(
        'error',
        function (e) {
          err(null, e)
        },
        false
      )
    }
    s.parentNode.insertBefore(o, s)
  }

  var asyncLoadWithFallBack = function (arr, success, reject) {
    var currReject = function () {
      reject()
      arr.shift()
      if (arr.length) async(arr[0], success, currReject)
    }

    async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack(
    [
      'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js',
      'https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js',
      "/lib/webfontloader.min.js",
    ],
    asyncCb,
    asyncErr
  )
</script>

            <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
            <div class="container container-unloaded">
                <main class="main post-page">
    <article class="article-entry">
        <h1 id="一cpu执行过程">一、CPU执行过程</h1>
<h2 id="cpu基本硬件结构">1.1 CPU基本硬件结构</h2>
<p>我们直到，计算机主要是由<strong>CPU、内存、I/O设备</strong>组成的，操作速度<strong>CPU
Cache &gt; 内存 &gt; 硬盘</strong></p>
<ul>
<li>CPU Cache有三级缓存，分别是<strong>L1 &gt; L2 &gt;
L3</strong>，L1速度最快、容量最小、价格最昂贵</li>
</ul>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/Computer_struct.png" width="80%"></p>
<p>而<strong>CPU</strong>是计算机的核心部件，它负责<strong>执行指令、控制操作</strong>等，其执行速度极快，且速度与时钟周期息息相关。CPU的基本硬件结构如下：</p>
<ul>
<li><strong>寄存器</strong>：CPU内部的高速存储器，用于缓存指令、数据等。
<ul>
<li><strong>通用寄存器</strong>：存放<strong>数据</strong></li>
<li><strong>程序计数器</strong>：存放下一条指令的<strong>地址</strong></li>
<li><strong>指令寄存器</strong>：存放当前<strong>指令</strong></li>
</ul></li>
<li><strong>逻辑单元ALU</strong>：负责<strong>执行算术运算、逻辑运算、数据传输、条件分支等</strong></li>
<li><strong>控制单元</strong>：负责<strong>控制指令的执行</strong>
<ul>
<li>负责按照地址从内存中<strong>取出指令</strong></li>
<li>负责<strong>跳转</strong>操作</li>
</ul></li>
</ul>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/CPU_Struct.png"></p>
<h2 id="cpu寻址与位宽的关系">1.2 CPU寻址与位宽的关系</h2>
<h3 id="位宽">1.2.1 位宽</h3>
<p><strong>位宽</strong>是指CPU<strong>一个时间周期</strong>能处理的<strong>数据位数</strong>，例如<strong>32位</strong>或<strong>64位</strong>，位宽越大，CPU处理数据的能力越强，但同时也会增加成本。</p>
<h3 id="寻址">1.2.2 寻址</h3>
<p><strong>寻址</strong>是指CPU访问内存的方式，是由<strong>地址总线</strong>决定的，因此<strong>寻址</strong>能力与<strong>位宽</strong>是无关的，因为位宽管的是<strong>数据</strong>。</p>
<h3 id="位宽与寻址的关系">1.2.3 位宽与寻址的关系</h3>
<p>场景：</p>
<ul>
<li>当CPU需要从<strong>内存</strong>中读取数据到<strong>寄存器</strong>
或者 <strong>写入数据</strong>到物理内存时</li>
</ul>
<p>流程：</p>
<ul>
<li>CPU会先通过<strong>地址总线</strong>指定需要访问的<strong>物理内存地址</strong></li>
<li>在指定的<strong>物理内存地址</strong>通过<strong>数据总线</strong>进行<strong>读取</strong>或<strong>写入</strong>操作</li>
</ul>
<h2 id="cpu执行指令过程">1.3 CPU执行指令过程</h2>
<p>CPU执行指令的<strong>一个指令周期</strong>过程如下：</p>
<ul>
<li>step1：CPU读取<strong>程序计数器</strong>中的<strong>指令地址</strong>（内存地址）</li>
<li>step2：CPU根据指令地址，交由<strong>控制单元</strong>操作<strong>地址总线</strong>去访问指定内存地址，读取指令</li>
<li>step3：CPU将读取到的指令存放到<strong>指令寄存器</strong>中</li>
<li>step4：<strong>程序计数器</strong>完成上述操作后，自增指向下一条指令，其中自增的步长（字节）取决于<strong>CPU位宽</strong>，一般为<strong>32位</strong>或<strong>64位</strong></li>
<li>step5：CPU根据<strong>指令寄存器</strong>中的指令，解析指令类型和参数，对于<strong>计算指令</strong>，将参数从<strong>通用寄存器</strong>中取出，交由<strong>逻辑运算单元ALU</strong>执行计算</li>
</ul>
<h1 id="二用户态与内核态">二、用户态与内核态</h1>
<h2 id="用户态与内核态">2.1 用户态与内核态</h2>
<p>OS中的<strong>内存</strong>根据<strong>权限</strong>划分为两个空间：</p>
<ul>
<li><strong>用户空间（User
Space）</strong>：用户程序运行的空间（权限小，执行普通操作）</li>
<li><strong>内核空间（Kernel
Space）</strong>：操作系统运行的空间（权限大，执行访问磁盘、内存分配、网卡、声卡等敏感操作需要进行安全校验）
-<strong>内核态是用于应用程序跟操作系统、硬件连接的桥梁</strong>，进行<strong>系统调用</strong>、<strong>中断处理</strong>等操作。拥有最高级别的操作权限，可以直接访问如<strong>网卡、硬盘、内存</strong>等资源</li>
</ul>
<p>一个运行中的<strong>进程/程序</strong>，在执行中有可能处于<strong>用户态</strong>或者<strong>内核态</strong>，因此这里就涉及了两个空间之间的切换：</p>
<ul>
<li><strong>用户态---&gt;内核态</strong>：当用户程序需要进行<strong>外部资源申请</strong>时，需要切换到<strong>内核态</strong>，一般有以下几种情况：
<ul>
<li><strong>系统调用</strong>：用户程序通过<strong>系统调用</strong>请求操作系统提供服务（<strong>软中断</strong>）</li>
<li><strong>异常</strong>：用户程序执行过程中出现<strong>异常</strong>，如<strong>除零操作</strong></li>
<li><strong>中断</strong>：外部设备发生<strong>中断</strong>，需要CPU处理</li>
</ul></li>
</ul>
<h3 id="系统调用">2.1.1 系统调用</h3>
<p>一次系统调用一般会触发<strong>两次CPU上下文切换</strong>：</p>
<ul>
<li>第一次是<strong>用户态-&gt;内核态</strong>，要将<strong>寄存器、堆栈信息等</strong>保存到<strong>内核栈</strong>中，用于切回来时程序的恢复</li>
<li>第二次是<strong>内核态-&gt;用户态</strong>，要将<strong>内核栈</strong>中的信息恢复到<strong>用户栈</strong>中，用于程序的继续执行</li>
</ul>
<p><strong>1）系统调用的类型</strong></p>
<p><strong>系统调用</strong>一般有以下几种：</p>
<ul>
<li><strong>进程控制</strong>：如创建进程(<code>fork</code>)、终止进程(<code>exit</code>)</li>
<li><strong>文件操作</strong>：如打开文件(<code>open</code>)、读写文件(<code>read/write</code>)、关闭文件(<code>close</code>)</li>
<li><strong>设备（外设）操作</strong>：如读写设备(<code>read/write</code>)</li>
<li><strong>通信</strong>：如创建管道(<code>pipe</code>)、消息队列(<code>msgget</code>)、<code>mmap</code></li>
</ul>
<p>以<strong>申请内存（malloc）</strong>为例，当<code>C++</code>中调用<code>malloc</code>函数时，实际上会执行<strong>系统调用</strong>：</p>
<ul>
<li><strong>brk</strong>：对于较小的内存申请，会调用<code>brk</code>系统调用</li>
<li><strong>mmap</strong>：对于较大的内存申请，会调用<code>mmap</code>，<code>mmap</code>申请的是<strong>虚拟内存</strong>而不是<strong>物理内存</strong>，当出现<strong>第一次访问</strong>时，会发现该处的<strong>虚拟内存</strong>没有映射到<strong>物理内存</strong>，此时会发生<strong>缺页中断</strong>，操作系统才会将<strong>虚拟内存</strong>映射到<strong>物理内存</strong>中</li>
</ul>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/user_kernal_state.png" width="80%"></p>
<p><strong>2）系统调用的过程</strong></p>
<p>正常情况下，程序是运行在<strong>用户态</strong>内存空间中的</p>
<p>当程序需要执行<strong>系统调用</strong>时，会发现其<strong>权限</strong>不够，此时会产生<strong>中断Trap</strong>（切换到内核态是通过<strong>中断</strong>实现的）</p>
<p>然后CPU跳转到<strong>内核空间</strong>执行<strong>系统调用</strong></p>
<p>在内核态处理完后，再次产生<strong>中断Trap</strong>，并将<strong>系统调用</strong>的结果返回给<strong>用户空间</strong></p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/User_Kernel.png" width="80%"></p>
<h3 id="中断">2.1.2 中断</h3>
<p><strong>1）中断的概念</strong></p>
<p><strong>中断</strong>是指CPU在执行程序时，由于<strong>外部事件</strong>的发生（通常由IO设备触发），当CPU收到<strong>中断号</strong>时，<strong>CPU暂停当前程序的执行</strong>，转而去执行相应的<strong>中断处理程序</strong>，处理完后再返回原来的程序继续执行。</p>
<p>操作系统会注册<strong>中断号</strong>以及其对应的<strong>中断处理程序</strong>（也就是注册后存在中断向量表中），当中断发生时，CPU会根据<strong>中断号</strong>找到对应的<strong>中断处理程序</strong>，并执行。</p>
<p>其中中断向量表的一个节点如下：</p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/CruptTable.png" width="50%"></p>
<p>具体执行中断的步骤如下（以键盘按下为例）：</p>
<ul>
<li><strong>硬件</strong>：键盘按下，会通过<strong>中断控制器</strong>发送<strong>中断信号
n</strong>给<strong>CPU</strong></li>
<li><strong>CPU</strong>：收到<strong>中断信号
n</strong>后，会去<strong>中断向量表</strong>中寻找第 n
个<strong>中断描述符</strong>，从中断描述符中找到<strong>中断处理程序的地址</strong></li>
<li><strong>CPU</strong>：通过<strong>压栈操作</strong>保存当前程序的<strong>状态（原来的程序地址、原来的程序堆栈、原来的标志位）</strong>，然后跳转到<strong>中断处理程序</strong>的地址执行</li>
<li>中断处理程序执行完后，再通过<strong>出栈操作</strong>恢复原来的程序状态，继续执行原来的程序</li>
</ul>
<p><strong>2）操作系统需要中断的原因</strong></p>
<ul>
<li>针对硬件中断：设想一下，如果没有中断机制，那么CPU在执行程序时，还要不断的去<strong>轮询外设</strong>是否有数据到来，导致CPU的<strong>利用率</strong>非常低。</li>
<li>针对软件中断：如果一个应用程序触发了某个操作，需要从<strong>用户态</strong>切换到<strong>内核态</strong>，如果没有<strong>中断机制</strong>，那么CPU会进入<strong>盲等待</strong>状态（等待寄存器空闲）。(<strong>中断机制</strong>可以让CPU在等待时，去执行其他程序)</li>
</ul>
<p><strong>3）CPU触发中断的三种方式</strong></p>
<ul>
<li>通过<strong>中断控制器（外设）</strong>给 CPU 的 <code>INTR</code>
引脚发送信号，CPU 从中断控制器的一个端口上读取中断号。
<ul>
<li>比如按下键盘的一个按键，最终会给到 CPU 一个 0x21 中断号。</li>
</ul></li>
<li>CPU
执行某条指令发现了<strong>异常</strong>，会<strong>自己触发并给自己一个中断号</strong>
<ul>
<li>比如执行到了无效指令，CPU 会给自己一个 0x06 的中断号。</li>
</ul></li>
<li><strong>系统调用</strong>执行 <code>INT n</code> 指令，会直接给 CPU
一个中断号 n
<ul>
<li>比如触发了 Linux 的<strong>系统调用</strong>，实际上就是执行了
<strong>INT 0x80</strong> 指令，那么 CPU 收到的就是一个 0x80
中断号。</li>
</ul></li>
</ul>
<p><strong>4）硬件中断和软件中断</strong></p>
<p>硬件中断和软件中断都属于<strong>硬中断</strong>，只是触发方式不同。</p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/Currpt.png" width="80%"></p>
<p><strong>5）硬中断和软中断</strong></p>
<p>由于中断会打断内核中进程的正常调度运行，所以要求中断服务程序尽可能的短小精悍；但是在实际系统中，当中断到来时，要完成工作往往进行大量的耗时处理。</p>
<p>所以一般 Linux
会把中断分成上下两半部分执行，<strong>上半部分处理最简单的逻辑（硬中断）</strong>，下半部分直接丢给一个<strong>软中断</strong>异步处理。</p>
<p>比如我们进行<strong>网卡</strong>的<strong>数据包</strong>处理时：</p>
<ul>
<li>当网卡收到一个数据包时，将<strong>数据包</strong>放到<strong>内核</strong>的<strong>缓冲区</strong>中，然后会触发一个<strong>硬中断</strong></li>
<li>硬件中断告诉 CPU 有数据包到来并触发一个<strong>软中断</strong></li>
<li><strong>软中断</strong>会在<strong>内核态</strong>异步处理<strong>数据包</strong>的<strong>解析</strong>（如完整性、校验等）</li>
</ul>
<p><strong>硬中断</strong></p>
<p>上述<strong>3）</strong>中提到的三种方式全是<strong>硬中断</strong>（包括中断、异常以及
INT
指令这种软件中断）。整个中断机制是<strong>纯硬件实现的逻辑</strong>，不管触发它的是谁，所以通通叫硬中断。</p>
<p>微观上来说，CPU 在每一个指令周期的最后，都会<strong>留一个 CPU
周期去查看是否有中断</strong>，<strong>硬中断</strong>处理耗时短的操作</p>
<p><strong>软中断</strong></p>
<p><strong>软中断</strong>是处理<strong>硬中断</strong>后，延时处理具体的<strong>耗时</strong>的工作。</p>
<p><strong>主要区别</strong></p>
<ul>
<li><strong>硬中断</strong>是由硬件设备直接触发，通常是即时的，需要<strong>快速响应</strong>。</li>
<li><strong>软中断</strong>是由<strong>内核代码</strong>触发，可以是<strong>延迟的</strong>，用于处理那些不需要立即响应的任务。</li>
</ul>
<h3 id="异常">2.1.3 异常</h3>
<p><strong>异常</strong>是指程序在执行过程中，由于<strong>程序错误</strong>或<strong>CPU故障</strong>等原因，导致<strong>程序无法继续执行</strong>，<strong>CPU</strong>根据异常类型查找<strong>异常向量表</strong>，找到对应的异常处理程序，进行处理。</p>
<h2 id="用户态与内核态的切换的具体实现">2.2
用户态与内核态的切换的具体实现</h2>
<p>以<strong>Linux系统</strong>系统为例，操作系统会为每个进程分配出<strong>内核空间</strong>和<strong>用户空间</strong></p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/memory_type.png" width="30%"></p>
<p>当发生切换时：</p>
<ul>
<li><p><strong>CPU</strong>会涉及<strong>上下文切换</strong>，将<strong>用户态</strong>原来在<strong>CPU中</strong>的<strong>程序计数器</strong>和<strong>栈指针</strong>等寄存器的值保存到<strong>内核态</strong>的<strong>内核栈</strong>中，以便最后<strong>内核态</strong>执行完逐步出栈后，能够恢复到<strong>用户态</strong>的执行状态</p></li>
<li><p>保存完后再更新<strong>CPU</strong>的<strong>程序计数器</strong>和<strong>栈指针</strong>等寄存器的值，将其变为<strong>内核态</strong>的值</p></li>
<li><p>然后才<strong>跳转</strong>到<strong>内核态</strong>执行<strong>系统调用</strong></p></li>
<li><p><strong>系统调用</strong>结束后再次进行<strong>上下文切换</strong>，恢复<strong>CPU的寄存器</strong>的值，将其变为<strong>用户态</strong>的值</p></li>
</ul>
<p>系统调用过程中，并<strong>不会涉及</strong>到<strong>虚拟内存</strong>等进程用户态的资源，也<strong>不会切换进程</strong>。</p>
<p>系统调用过程通常称为<strong>特权模式切换</strong>，而不是进程上下文切换。</p>
<h2 id="用户态与内核态下的线程问题">2.3 用户态与内核态下的线程问题</h2>
<p>实际系统中会存在<strong>用户态线程</strong>和<strong>内核态线程</strong>的问题，关于这部分的<strong>线程</strong>问题将在下面的<strong>进程管理</strong>中详细介绍。</p>
<blockquote>
<p>参考资料：</p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Luckiers/article/details/123868625">Linux下软中断过程（详细）源码总结</a></p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://liuyehcf.github.io/2017/08/20/%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/">系统调用</a></p>
</blockquote>
<h1 id="三进程管理">三、进程管理</h1>
<h2 id="进程与线程">3.1 进程与线程</h2>
<h3 id="进程与线程的基本区别">3.1.1 进程与线程的基本区别</h3>
<ul>
<li><strong>进程</strong>：<strong>资源分配</strong>的基本单位</li>
<li><strong>线程</strong>：<strong>CPU调度</strong>的基本单位</li>
</ul>
<p>我们执行一个程序时，实际上是<strong>操作系统</strong>为我们创建了一个<strong>进程</strong>，一个进程中可以有多个线程存在</p>
<ul>
<li><strong>操作系统的三大资源</strong>
<ul>
<li><strong>CPU</strong></li>
<li><strong>内存</strong></li>
<li><strong>文件描述符</strong></li>
</ul></li>
<li><strong>进程分配的资源</strong>
<ul>
<li><strong>内存空间</strong>：代码段、数据段、堆、栈等</li>
<li><strong>文件描述符</strong>：打开的文件、网络连接等</li>
<li><strong>CPU时间片</strong></li>
</ul></li>
<li><strong>线程分配的资源</strong>
<ul>
<li><strong>寄存器</strong>：通用寄存器、程序计数器等</li>
<li><strong>栈</strong>：线程独有的栈空间（从进程的<strong>用户态堆</strong>中分配出来的）</li>
<li><strong>CPU时间片</strong></li>
</ul></li>
</ul>
<p>从最基本的关系来说，<strong>多线程</strong>可以共享其<strong>进程</strong>的<strong>资源（虚拟内存空间、文件描述符资源、信号处理器...）</strong>，各个线程之间<strong>独立</strong>地拥有自己的<strong>栈空间</strong>和<strong>寄存器</strong></p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/process_thread.png" width="80%"></p>
<p><strong>1）线程的优缺点</strong></p>
<ul>
<li><strong>优点</strong>：开销小、通信方便
<ul>
<li><strong>创建快</strong></li>
<li><strong>终止快</strong></li>
<li><strong>切换快</strong>：同一进程的线程切换不需要切换<strong>资源</strong>，只切换独有的<strong>栈空间</strong>和<strong>寄存器</strong></li>
<li>不用重新加载<strong>CPU页表缓存TLB</strong>：进程切换需要改变虚拟地址空间重新加载页表，会导致<strong>TLB（CPU中的页表缓存）失效</strong></li>
<li><strong>通信方便</strong>：同一进程的线程共享<strong>内存空间</strong>，数据传输<strong>不经过内核</strong></li>
</ul></li>
<li><strong>缺点</strong>：单个线程出错会导致整个进程崩溃</li>
</ul>
<p><strong>2）进程的优缺点</strong></p>
<ul>
<li><strong>优点</strong>：<strong>稳定性</strong>高
<ul>
<li><strong>独立性</strong>：进程之间<strong>独立</strong>，一个进程出错不会影响其他进程</li>
<li><strong>资源独立</strong>：进程之间<strong>资源独立</strong>，一个进程的资源不会被其他进程访问</li>
</ul></li>
<li><strong>缺点</strong>：开销大、通信复杂</li>
</ul>
<h3 id="进程与线程的结构描述">3.1.2 进程与线程的结构描述</h3>
<p>进程和线程的结构称为<strong>进程表</strong>和<strong>线程表</strong>，其中包含了进程和线程的<strong>基本信息</strong>，存储于<strong>内核空间</strong>中。</p>
<p><strong>1）进程控制块的结构：PCB</strong></p>
<p>在操作系统中，每个进程具有唯一标识<strong>PCB</strong>（Process
Control
Block）来描述一个进程的基本信息，进程的PCB是系统感知进程的唯一实体，包括：</p>
<ul>
<li><strong>PID</strong>：进程的唯一标识</li>
<li><strong>Name</strong>：进程的名字</li>
<li><strong>State</strong>：进程的状态（运行、就绪、阻塞等）</li>
<li><strong>Priority</strong>：进程的CPU抢占优先级</li>
<li><strong>资源I/O分配</strong>：内存地址、虚拟空间地址、打开和使用的文件描述符等（进程间是通过页表的方式隔离地址空间的）</li>
<li><strong>CPU信息</strong>：主要是记录切片中断保存现场的信息，但是其实<strong>PCB</strong>不够大存不下，所以会有<strong>内核栈</strong>来配合存放这些信息</li>
<li>...... 要频繁转换 <img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/PCB.png" width="80%"></li>
</ul>
<p><strong>2）线程控制块的结构：TCB</strong></p>
<p>线程表中存放的信息与进程类似，包括：</p>
<ul>
<li><strong>Thread ID</strong>：线程的唯一标识</li>
<li><strong>State</strong>：进程的状态（运行、就绪、阻塞等）</li>
<li><strong>Priority</strong>：进程的CPU抢占优先级</li>
<li><strong>CPU信息</strong>：程序计数器等寄存器的值</li>
</ul>
<h3 id="进程与线程的状态类型">3.1.4 进程与线程的状态类型</h3>
<p>我们知道，CPU调度采用的是<strong>时间切片</strong>的方式，所以需要有多个状态来描述进程和线程的状态：</p>
<ul>
<li><strong>创建状态</strong></li>
<li><strong>就绪状态</strong>：维护一个<strong>就绪队列</strong>，等待CPU调度</li>
<li><strong>运行状态</strong>：该时刻正在占用CPU</li>
<li><strong>阻塞状态</strong>：等待某个事件的发生，如I/O磁盘操作读取数据、打印机响应等，避免<strong>占用CPU</strong></li>
<li><strong>挂起状态</strong>：当进程/线程<strong>内存空间</strong>搬至<strong>外存</strong>、<code>sleep</code>、<strong>Ctrl+Z主动挂起</strong>时会进入挂起状态
<ul>
<li><strong>就绪挂起</strong>：内存空间搬至<strong>外存（硬盘）</strong>，但只要重新进入内存就立刻执行</li>
<li><strong>阻塞挂起</strong>：等待某个事件的发生，但只要事件发生就立刻执行w</li>
</ul></li>
<li><strong>终止状态</strong>：进程或线程执行完毕</li>
</ul>
<p>各状态之间具有相互转换的关系：</p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/process_state.png" width="80%"></p>
<p><strong>1）创建状态</strong></p>
<ul>
<li>申请<strong>PCB/TCB</strong>，并初始化</li>
<li>分配内存资源如<strong>内存空间</strong>，并将<strong>代码段</strong>、<strong>数据段</strong>、<strong>堆</strong>、<strong>栈</strong>等加载到内存中</li>
<li>将<strong>PCB/TCB</strong>插入<strong>就绪队列</strong>中</li>
</ul>
<p><strong>2）阻塞状态</strong></p>
<p>当<strong>运行状态</strong>中的进程出现某些系统调用时，如<strong>I/O操作</strong>，会进入<strong>阻塞状态</strong>，等待<strong>事件</strong>的发生</p>
<ul>
<li>找对应的<strong>PCB/TCB</strong>，将其从<strong>就绪队列</strong>中移除</li>
<li>经历<strong>运行状态---&gt;保护现场---&gt;阻塞状态</strong>的过程</li>
<li>将<strong>PCB/TCB</strong>插入<strong>阻塞队列</strong>中</li>
</ul>
<p><strong>3）从阻塞状态唤醒到就绪状态</strong></p>
<p>当<strong>阻塞状态</strong>的进程等待的<strong>事件</strong>发生后，会进入<strong>就绪状态</strong>（信号触发）</p>
<ul>
<li>查找PCB/TCB，将其从<strong>阻塞队列</strong>中移除</li>
<li>将其插入<strong>就绪队列</strong>中等待调度</li>
</ul>
<p><strong>4）终止状态</strong></p>
<ul>
<li>查找PCB</li>
<li>从<strong>运行状态</strong>停止，也就是归还CPU</li>
<li>子进程变成<strong>孤儿进程</strong>交给<strong>init</strong>
<strong>1号</strong>进程接管</li>
<li>归还资源给操作系统</li>
<li>从<strong>PCB/TCB队列</strong>中移除</li>
</ul>
<h3 id="cpu调度算法">3.1.4 CPU调度算法</h3>
<p>调度关系着CPU的<strong>利用率</strong>和<strong>响应时间</strong>，当进程/线程进入<strong>运行状态</strong>就是占用了CPU，而什么时候占用就与调度算法有很大关系了</p>
<p><strong>什么时候触发调度？</strong></p>
<p>总的来说，在上面那张状态图中，跟<strong>运行状态</strong>相关联的<strong>就绪状态</strong>、<strong>阻塞状态</strong>、<strong>终止状态</strong>的出现都会触发调度</p>
<ul>
<li><strong>时间片用完</strong>：出现<strong>就绪态---运行态</strong>的转换</li>
<li><strong>发生阻塞</strong>：当出现阻塞事件时，正在运行的进程会进入阻塞状态，此时会触发调度重新选一个进程执行</li>
<li><strong>进程终止</strong></li>
</ul>
<p><strong>调度算法</strong></p>
<p>调度算法是为了<strong>提高CPU的利用率</strong>和<strong>响应时间</strong>，调度算法有<strong>抢占式</strong>和<strong>非抢占式</strong>之分：</p>
<ul>
<li><strong>非抢占式</strong>：进程一旦进入<strong>运行状态</strong>，就一直运行，直到进程<strong>终止</strong>或<strong>阻塞</strong>，才会调度其他进程</li>
<li><strong>抢占式</strong>：进程在<strong>运行状态</strong>时，会根据<strong>时间片</strong>或<strong>优先级</strong>等因素，被其他进程抢占，从而调度其他进程（到时就换）</li>
</ul>
<p>常见的调度算法有：</p>
<ul>
<li><strong>先来先服务（FCFS）</strong>：按照进程到达的先后顺序进行调度
<ul>
<li>每次从就绪队列选择最先进入队列的进程，然后一直运行，直到进程退出或被阻塞，才会继续从队列中选择第一个进程接着运行。</li>
</ul></li>
<li><strong>短作业优先（SJF）</strong>：按照进程的<strong>运行时间</strong>进行入队列
<ul>
<li>每次从就绪队列选择<strong>运行时间最短</strong>的进程，然后一直运行，直到进程退出或被阻塞，才会继续从队列中选择<strong>运行时间最短</strong>的进程接着运行。</li>
</ul></li>
<li><strong>时间片轮转（RR）</strong>：按照<strong>时间片</strong>进行调度
<ul>
<li>按照公平原则，每个进程都有一个<strong>时间片</strong>，当时间片用完后，会重新进入<strong>就绪队列</strong>，等待下一次调度</li>
</ul></li>
<li><strong>优先级调度</strong>：按照<strong>优先级</strong>进行调度
<ul>
<li>每次从就绪队列选择<strong>优先级最高</strong>的进程，然后一直运行，直到进程退出或被阻塞，才会继续从队列中选择<strong>优先级最高</strong>的进程接着运行。</li>
</ul></li>
<li><strong>多级反馈队列调度</strong>：结合<strong>时间片轮转</strong>和<strong>优先级调度</strong>的调度算法
<ul>
<li>将<strong>就绪队列</strong>分为<strong>多个队列</strong>，每个队列有一个<strong>时间片</strong>，<strong>优先级</strong>逐渐降低，当一个进程<strong>时间片</strong>用完后，会进入<strong>下一个队列</strong>等待调度</li>
</ul></li>
</ul>
<h2 id="上下文切换">3.2 上下文切换</h2>
<p>当CPU出现<strong>调度</strong>，需要切换到其他进程时，会涉及到<strong>上下文切换</strong>，需要经过<strong>当前进程</strong>的<strong>保存现场</strong>和<strong>下一个进程</strong>的<strong>加载恢复现场</strong></p>
<p>在切换前程序会先停止运行，然后<strong>触发中断保护现场</strong>，之后操作系统会将<strong>寄存器信息</strong>压栈到<strong>PCB+内核栈</strong>中</p>
<p>现代操作系统都是直接调度<strong>线程</strong>，而不是<strong>进程</strong>，因为<strong>线程</strong>的<strong>切换</strong>比<strong>进程</strong>的<strong>切换</strong>要快</p>
<ul>
<li><strong>线程</strong>的<strong>上下文切换</strong>只需要<strong>切换栈</strong>和<strong>寄存器</strong>即可</li>
<li><strong>进程</strong>的<strong>上下文切换</strong>需要<strong>切换页表</strong>、<strong>切换内存空间</strong>等操作</li>
</ul>
<h3 id="触发上下文切换的场景">3.2.1 触发上下文切换的场景</h3>
<p>当出现<strong>CPU当前运行状态的进程/线程需要转换为另一个进程/线程的场景时（也就是发生调度）</strong>，就会触发<strong>上下文切换</strong>，主要有以下几种情况：</p>
<ul>
<li><strong>运行状态&lt;---&gt;就绪状态</strong>
<ul>
<li><strong>时间片用完，剥夺CPU，通过时间中断实现切换</strong></li>
</ul></li>
<li><strong>运行状态&lt;---&gt;挂起状态</strong>
<ul>
<li><strong>资源不足挂起</strong></li>
<li><strong>sleep主动挂起</strong></li>
</ul></li>
<li><strong>运行状态&lt;---&gt;阻塞状态</strong>
<ul>
<li><strong>硬件中断</strong>：如<strong>I/O操作</strong>等</li>
</ul></li>
</ul>
<h3 id="线程和进程上下文切换比较">3.2.2 线程和进程上下文切换比较</h3>
<p>要比较两者的上下文切换区别，首先要分别了解<strong>进程</strong>和<strong>线程</strong>的<strong>上下文切换</strong>具体切换了什么内容？</p>
<p><strong>1）上下文指什么？</strong></p>
<p>上下文可以分为<strong>用户上下文</strong>、<strong>系统上下文</strong>和<strong>硬件上下文</strong>：</p>
<ul>
<li><strong>用户上下文</strong>：用户态的地址空间（用户空间）、页表等信息</li>
<li><strong>系统上下文</strong>：PCB+内核栈等信息</li>
<li><strong>硬件上下文</strong>：寄存器、程序计数器等信息</li>
</ul>
<p><strong>2）进程、线程、协程上下文切换的内容</strong></p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/context_switch.png" width="60%"></p>
<h3 id="上下文切换的过程">3.2.3 上下文切换的过程</h3>
<p>进程<strong>状态的切换</strong>会触发进程的<strong>上下文切换</strong>，而切换是由<strong>中断驱动实现的</strong></p>
<p>以进程为例，首先要了解进程的组成，进程的切换中<strong>保护线程</strong>就是围绕进程的组成来进行的：</p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/process_struct.png" width="80%"></p>
<p>具体过程主要为</p>
<ul>
<li><strong>硬件中断</strong>：CPU收到<strong>中断信号</strong>后，会<strong>暂停当前进程</strong>的执行</li>
<li><strong>保存当前进程的上下文</strong>：先将<strong>SP</strong>、<strong>PC</strong>保存至<strong>内核栈</strong>中</li>
<li><strong>切换到内核态</strong>：<strong>程序计数器PC</strong>重新指向<strong>内核态</strong>的<strong>中断处理程序</strong></li>
<li><strong>中断处理程序</strong>：执行<strong>中断处理程序</strong>，将通用寄存器保存下来</li>
<li><strong>调度新进程</strong>：根据<strong>调度算法</strong>选择新的进程，将其<strong>PCB、内核栈</strong>中的<strong>寄存器</strong>信息恢复到<strong>CPU</strong>中</li>
</ul>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/process_switch.png" width="80%"></p>
<blockquote>
<p>参考资料：</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1PK411w75b/?vd_source=fa61c94b4d0a0af186e3cb794e46eea9">用户级thread_内核级thread_内核thread之区别</a></p>
<p><a target="_blank" rel="noopener" href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E9%87%8D%E5%AD%A6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%AE%8C/14%20%20%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81%EF%BC%9A%E7%94%A8%E6%88%B7%E6%80%81%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81%E7%BA%BF%E7%A8%8B%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F.md">用户态和内核态：用户态线程和内核态线程有什么区别？</a></p>
<p><a target="_blank" rel="noopener" href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E9%87%8D%E5%AD%A6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%AE%8C/17%20%20%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%EF%BC%9A%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%BC%80%E9%94%80%E6%AF%94%E7%BA%BF%E7%A8%8B%E5%A4%A7%E5%9C%A8%E4%BA%86%E5%93%AA%E9%87%8C%EF%BC%9F.md">17
进程和线程：进程的开销比线程大在了哪里？</a></p>
<p><a target="_blank" rel="noopener" href="https://xiaolincoding.com/os/4_process/process_base.html#%E8%BF%9B%E7%A8%8B">5.1
进程、线程基础知识</a></p>
</blockquote>
<h2 id="协程">3.3 协程</h2>
<p>相比于进程和线程<strong>，</strong>协程<strong>是一种</strong>用户态<strong>的</strong>轻量级线程**</p>
<p><strong>协程 VS 线程</strong></p>
<ul>
<li><p><strong>协程</strong>的<strong>切换</strong>是<strong>用户态</strong>的<strong>切换</strong>，由<strong>内核态</strong>调度的（纯软实现），而<strong>线程</strong>需要频繁转换<strong>用户态&lt;---&gt;内核态</strong>，因此<strong>协程</strong>的<strong>切换</strong>速度比<strong>线程</strong>的<strong>切换</strong>速度更快</p></li>
<li><p>相比于<strong>线程</strong>上下文切换需要<strong>内核态+寄存器</strong>，<strong>协程</strong>的<strong>上下文内容</strong>只有硬件上下文，也就是<strong>寄存器（SP、PC、DX）</strong>的内容</p></li>
</ul>
<p><strong>进程 VS 线程 VS 协程</strong></p>
<table>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr>
<th style="text-align: center;"></th>
<th style="text-align: center;">进程</th>
<th style="text-align: center;">线程</th>
<th style="text-align: center;">协程</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><strong>切换内容</strong></td>
<td style="text-align: center;">用户态（页表）+内核态+硬件上下文</td>
<td style="text-align: center;">用户态+内核态+硬件上下文</td>
<td style="text-align: center;">硬件上下文</td>
</tr>
<tr>
<td style="text-align: center;"><strong>切换位置</strong></td>
<td style="text-align: center;">内核态</td>
<td style="text-align: center;">内核态</td>
<td style="text-align: center;">用户态</td>
</tr>
<tr>
<td style="text-align: center;"><strong>切换速度</strong></td>
<td style="text-align: center;">低</td>
<td style="text-align: center;">中</td>
<td style="text-align: center;">高</td>
</tr>
</tbody>
</table>
<p><strong>协程的实现</strong></p>
<p>协程属于<strong>用户态</strong>的<strong>线程</strong>，因此其实现是在用户态的<strong>堆</strong>中malloc出来的<strong>栈空间</strong>，并在<strong>用户态</strong>中进行<strong>切换</strong>，<strong>切换</strong>时只需要<strong>保存寄存器</strong>的信息即可</p>
<p>根据堆中开辟空间的方式，<strong>有栈协程</strong>可以分为<strong>独立栈</strong>和<strong>共享栈</strong>两种：</p>
<ul>
<li><strong>独立栈</strong>：每个协程都有自己的<strong>栈空间</strong>
<ul>
<li><strong>优点</strong>：<strong>切换</strong>时只需要<strong>切换栈指针</strong>即可，无需再次拷贝，因此比较快</li>
<li><strong>缺点</strong>：独占内存资源，<strong>栈空间</strong>较大时会占用较多内存</li>
</ul></li>
<li><strong>共享栈</strong>：所有协程共享一个<strong>栈空间</strong>
<ul>
<li><strong>优点</strong>：节省内存资源</li>
<li><strong>缺点</strong>：<strong>切换</strong>时需要<strong>拷贝栈空间</strong>，因此<strong>切换</strong>速度较慢</li>
</ul></li>
</ul>
<p>在堆区中，协程的空间通过<strong>esp</strong>和<strong>ebp</strong>来控制</p>
<ul>
<li><strong>esp</strong>表示<strong>栈顶</strong></li>
<li><strong>ebp</strong>表示<strong>栈底</strong></li>
</ul>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/coroutine.png" width="20%"></p>
<h2 id="进程间通信">3.4 进程间通信</h2>
<p>进程间通信主要有<strong>管道</strong>、<strong>消息队列</strong>、<strong>共享内存</strong>、<strong>信号量</strong>、<strong>信号</strong>、<strong>套接字</strong>等方式</p>
<h3 id="管道pipe">3.4.1 管道Pipe</h3>
<p>管道是一种<strong>半双工</strong>的<strong>通信方式</strong>，由<strong>读端</strong>和<strong>写端</strong>组成的<strong>单向</strong>通信方式</p>
<p>我们最常见的Linux中的指令<code>|</code>其实就代表了<strong>管道</strong>的使用，如<code>ps aux | grep mysql</code></p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/pipe.png" width="50%"></p>
<p>管道可以分为<strong>匿名管道</strong>和<strong>有名管道</strong>：</p>
<ul>
<li><strong>匿名管道</strong>：无文件实体，只能用于<strong>父子进程</strong>或<strong>兄弟进程</strong>之间的通信</li>
<li><strong>有名管道</strong>：存在文件实体，可以用于<strong>任意进程</strong>之间的通信</li>
</ul>
<p><strong>1）存储方式</strong></p>
<ul>
<li>管道属于<strong>内核里的一块缓冲区</strong></li>
<li>数据无格式</li>
<li><strong>读端</strong>读取数据后，<strong>缓冲区</strong>中的数据就会被清空</li>
<li>大小有限，<strong>满了</strong>会<strong>阻塞写端</strong>，<strong>空了</strong>会<strong>阻塞读端</strong></li>
</ul>
<p><strong>2）缺点</strong></p>
<p>通信效率低，不适合<strong>大量数据、频繁通信</strong>的场景</p>
<h3 id="消息队列mq">3.4.2 消息队列MQ</h3>
<p><strong>1）存储方式</strong></p>
<ul>
<li><strong>消息队列</strong>是以<strong>消息链表</strong>的形式存储的</li>
<li><strong>消息队列</strong>中的<strong>消息</strong>是有<strong>格式</strong>的，可以是<strong>结构体</strong>等</li>
<li>有固定大小的存储块</li>
</ul>
<p><strong>2）优点</strong></p>
<ul>
<li>适用于频繁的数据交流</li>
</ul>
<p><strong>3）缺点</strong></p>
<ul>
<li>通信不及时：<strong>消息队列</strong>是<strong>异步</strong>的，<strong>发送</strong>和<strong>接收</strong>消息的时间不一定是同步的</li>
<li>存储块有限，不适合<strong>大量数据</strong>的通信</li>
<li>存在用户态和内核态的<strong>数据拷贝</strong>开销：<strong>发送</strong>和<strong>接收</strong>消息时，需要<strong>数据拷贝</strong>，效率较低</li>
</ul>
<h3 id="共享内存">3.4.3 共享内存</h3>
<p><strong>1）存储方式</strong></p>
<p>通过拿出一块<strong>虚拟内存</strong>，然后<strong>映射</strong>到<strong>物理内存</strong>中，实现<strong>共享内存</strong>的通信</p>
<p><strong>2）优点</strong></p>
<p>通过<strong>映射</strong>的方式不需要<strong>数据拷贝</strong>，效率较高</p>
<h3 id="信号量">3.4.4 信号量</h3>
<p>信号量只是一个<strong>计数值</strong>，通常用于进程or线程的<strong>数据同步</strong>、防止多进程竞争共享资源</p>
<p>信号量有两个关键操作（P&amp;V操作）：</p>
<ul>
<li><strong>P操作：请求资源，对应C++的.wait()</strong>
<ul>
<li>信号量减1</li>
<li><code>sem&lt;0</code>：阻塞，表示无资源可用</li>
<li><code>sem&gt;0</code>：继续执行</li>
</ul></li>
<li><strong>V操作：释放资源，对应C++中的.signal()</strong>
<ul>
<li>信号量加1</li>
<li><code>sem&lt;=0</code>：唤醒一个等待的进程</li>
</ul></li>
</ul>
<h2 id="其它进程类型">3.5 其它进程类型</h2>
<p>进程有多种类型，主要有<strong>孤儿进程</strong>、<strong>僵尸进程</strong>、<strong>守护进程</strong>等，通过Linux的<code>ps</code>命令可以查看，进程间通过pid号来区分</p>
<h3 id="孤儿进程无害会自动回收">3.5.1 孤儿进程：无害（会自动回收）</h3>
<p><strong>孤儿进程</strong>是指<strong>父进程退出</strong>后，<strong>子进程</strong>还在运行</p>
<p>此时<strong>子进程</strong>的<strong>父进程</strong>会被进程号为1的<strong>init</strong>进程接管，操作系统会定期清理<strong>孤儿进程</strong></p>
<h3 id="僵尸进程有危害">3.5.2 僵尸进程：有危害</h3>
<p>进程<strong>exit()</strong>退出内核后会<strong>释放该进程的所有资源</strong>（打开的文件、占用内存等），但是不会主动<strong>回收</strong>该进程的<strong>PCB</strong>，也就是该<strong>进程号</strong>还一直被占用</p>
<p><strong>僵尸进程</strong>是指一个<strong>子进程</strong>已经<strong>exit()</strong>，但是<strong>父进程</strong>还没有<strong>回收</strong>它的<strong>PCB</strong>，导致<strong>子进程</strong>的<strong>PCB</strong>一直保存在<strong>内核</strong>中，这种进程就是<strong>僵尸进程</strong></p>
<p><strong>僵尸进程</strong>会占用<strong>系统资源（进程号有限）</strong>，因此需要<strong>回收</strong>它，回收有两种方式：</p>
<ul>
<li><strong>父进程主动回收</strong>
<ul>
<li>子进程退出时发送<strong>SIGCHLD</strong>信号给父进程，父进程通过<strong>wait()或waitpid()方法</strong>回收子进程</li>
</ul></li>
<li><strong>Kill父进程:向父进程对应的pid发送SIGKILL(9)，<code>kil -9 ppid</code></strong>
<ul>
<li>当父进程退出时，子进程会变为<strong>孤儿进程</strong>，被<strong>init</strong>进程接管并定期清理</li>
</ul></li>
</ul>
<h3 id="守护进程">3.5.3 守护进程</h3>
<p><strong>守护进程</strong>是一种在<strong>挂在后台</strong>运行的进程，通常用于<strong>系统服务</strong>的启动和管理</p>
<p>它会定期执行一些<strong>系统任务</strong>，如<strong>日志清理</strong>、<strong>定时任务</strong>等；其父进程是<strong>init</strong>进程，因此不会成为<strong>僵尸进程</strong>，同时操作系统结束它才会结束</p>
<h2 id="多线程同步问题">3.6 多线程同步问题</h2>
<p>多线程之间会存在<strong>资源竞争</strong>的问题，因此有<strong>互斥</strong>和<strong>同步</strong>的问题</p>
<ul>
<li><strong>互斥</strong>：某段代码同一时间只能被一个线程访问，其它线程需要阻塞等待进入</li>
<li><strong>同步</strong>：多个线程之间的<strong>数据互通</strong>需要协调工作，如<strong>生产者-消费者模型</strong>、<strong>读写锁</strong>等</li>
</ul>
<h3 id="为什么多线程需要同步">3.6.1 为什么多线程需要同步？</h3>
<p>假设有多线程共享的变量<code>i</code>，当执行<code>i=i+1</code>时，实际上在汇编层面上不是一个原子操作，而是分为<strong>读取</strong>、<strong>计算</strong>、<strong>写入</strong>三个步骤：</p>
<ul>
<li><strong>读取</strong>：内存中<code>i</code>的值--&gt;寄存器中</li>
<li><strong>计算</strong>：寄存器中的值+1</li>
<li><strong>写入</strong>：寄存器中的值--&gt;内存中<code>i</code></li>
</ul>
<p>因此多线程很有可能在其中某个步骤被<strong>抢占</strong>，导致<strong>数据不一致</strong>的问题</p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/crrupt.png" width="60%"></p>
<p>在文章<a href="https://akirazheng.github.io/2024/02/07/%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%88C++%EF%BC%89/#/%E4%BA%8C%E3%80%81C-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0">从0开始实现线程池(C++)</a>中有介绍<strong>互斥锁解决多线程数据共享问题</strong>以及<strong>死锁</strong>问题的代码模拟，这里不再赘述</p>
<h3 id="实现同步的方式">3.6.2 实现同步的方式</h3>
<p>实现同步有<strong>加锁</strong>和<strong>不加锁</strong>两种方式：</p>
<ul>
<li><strong>不加锁</strong>：通过原子操作来保证数据的一致性，如<strong>CAS、TAS</strong>等</li>
<li><strong>加锁</strong>：通过<strong>互斥锁</strong>、<strong>读写锁</strong>、<strong>条件变量</strong>等方式来保证数据的一致性</li>
</ul>
<p>也可以将锁分为<strong>乐观锁（通常也是无锁编程）</strong>和<strong>悲观锁</strong>：</p>
<ul>
<li><strong>乐观锁</strong>：先修改完共享资源，再验证这段时间内有没有发生冲突，如果没有其他线程在修改资源，那么操作完成，如果发现有其他线程已经修改过这个资源，就放弃本次操作
<ul>
<li>重写成本高，不适合冲突频繁场景</li>
<li>通常加入<strong>版本号/时间戳</strong>等字段作为<strong>乐观锁</strong>的判断依据</li>
</ul></li>
<li><strong>悲观锁</strong>：认为多线程同时修改共享资源的概率比较高，于是很容易出现冲突，所以访问共享资源前，先要上锁
<ul>
<li>适合冲突频繁场景</li>
<li>锁住等待的成本高</li>
</ul></li>
</ul>
<p>各种锁如下所示：</p>
<p><img src="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/lock.png" width="100%"></p>
<h3 id="死锁问题">3.6.3 死锁问题</h3>
<p>在文章<a href="https://akirazheng.github.io/2024/02/07/%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%88C++%EF%BC%89/#/%E4%BA%8C%E3%80%81C-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0">从0开始实现线程池(C++)</a>中有介绍<strong>互斥锁解决多线程数据共享问题</strong>以及<strong>死锁</strong>问题的代码模拟，这里不再赘述</p>

    </article>
    <!-- license -->
    
        <div class="license-wrapper">
            <p>Author：<a href="https://AkiraZheng.github.io">AkiraZheng</a>
            <p>Link：<a href="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/">https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/</a>
            <p>Publish date：<a href="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/">April 25th 2024, 5:14:13 pm</a>
            <p>Update date：<a href="https://akirazheng.github.io/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/">December 25th 2024, 10:50:16 pm</a>
            <p>License：本文采用<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    
    <!-- paginator -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href="/2024/04/26/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" title="动态规划-背包问题">
                    <div class="nextTitle">动态规划-背包问题</div>
                </a>
            
        </li>
        <li class="previous">
            
                <div class="prevSlogan">Previous Post</div>
                <a href="/2024/04/20/C-%E5%BA%95%E5%B1%82%E5%AD%A6%E4%B9%A0/" title="C++底层学习">
                    <div class="prevTitle">C++底层学习</div>
                </a>
            
        </li>
    </ul>
    <!-- comment -->
    
        <div class="post-comment">
            <!-- 来必力 City 版安装代码 -->

    <div id="lv-container" data-id="city" data-uid= MTAyMC81NjEyMS8zMjU4NA==>
        <script type="text/javascript">
            (function (d, s) {
                var j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') { return; }
                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');
        </script>
        <noscript>为正常使用来必力评论功能请激活 JavaScript</noscript>
    </div>


            

            

            

            <!-- utteranc评论 -->


            <!-- partial('_partial/comment/changyan') -->
            <!--PC版-->


            
            

            

        </div>
    
    <!-- timeliness note -->
    <!-- idea from: https://hexo.fluid-dev.com/posts/hexo-injector/#%E6%96%87%E7%AB%A0%E6%97%B6%E6%95%88%E6%80%A7%E6%8F%90%E7%A4%BA -->
    
    <!-- Mathjax -->
    
</main>

                <!-- profile -->
                
            </div>
            <footer class="footer footer-unloaded">
    <!-- social  -->
    
        <div class="social">
            
    
        
            
                <a href="mailto:tianzheng_edu@163.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="https://github.com/akirazheng" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    


        </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- website approve for Chinese user -->
    
    <!-- 不蒜子  -->
    
        <div class="busuanzi-container">
            
             
                <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
            
        </div>
    	
</footer>

        </div>
        <!-- toc -->
        
            <div class="toc-wrapper toc-wrapper-loding" style=







    top:50vh;

>
                <div class="toc-catalog">
                    <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
                </div>
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80cpu%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-text">一、CPU执行过程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cpu%E5%9F%BA%E6%9C%AC%E7%A1%AC%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-text">1.1 CPU基本硬件结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cpu%E5%AF%BB%E5%9D%80%E4%B8%8E%E4%BD%8D%E5%AE%BD%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">1.2 CPU寻址与位宽的关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E5%AE%BD"><span class="toc-text">1.2.1 位宽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BB%E5%9D%80"><span class="toc-text">1.2.2 寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E5%AE%BD%E4%B8%8E%E5%AF%BB%E5%9D%80%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">1.2.3 位宽与寻址的关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cpu%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4%E8%BF%87%E7%A8%8B"><span class="toc-text">1.3 CPU执行指令过程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E7%94%A8%E6%88%B7%E6%80%81%E4%B8%8E%E5%86%85%E6%A0%B8%E6%80%81"><span class="toc-text">二、用户态与内核态</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%80%81%E4%B8%8E%E5%86%85%E6%A0%B8%E6%80%81"><span class="toc-text">2.1 用户态与内核态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8"><span class="toc-text">2.1.1 系统调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD"><span class="toc-text">2.1.2 中断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8"><span class="toc-text">2.1.3 异常</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%80%81%E4%B8%8E%E5%86%85%E6%A0%B8%E6%80%81%E7%9A%84%E5%88%87%E6%8D%A2%E7%9A%84%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.2
用户态与内核态的切换的具体实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%80%81%E4%B8%8E%E5%86%85%E6%A0%B8%E6%80%81%E4%B8%8B%E7%9A%84%E7%BA%BF%E7%A8%8B%E9%97%AE%E9%A2%98"><span class="toc-text">2.3 用户态与内核态下的线程问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-text">三、进程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B"><span class="toc-text">3.1 进程与线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8C%BA%E5%88%AB"><span class="toc-text">3.1.1 进程与线程的基本区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%BB%93%E6%9E%84%E6%8F%8F%E8%BF%B0"><span class="toc-text">3.1.2 进程与线程的结构描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.1.4 进程与线程的状态类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cpu%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95"><span class="toc-text">3.1.4 CPU调度算法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2"><span class="toc-text">3.2 上下文切换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">3.2.1 触发上下文切换的场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E5%92%8C%E8%BF%9B%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E6%AF%94%E8%BE%83"><span class="toc-text">3.2.2 线程和进程上下文切换比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-text">3.2.3 上下文切换的过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%8F%E7%A8%8B"><span class="toc-text">3.3 协程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="toc-text">3.4 进程间通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E9%81%93pipe"><span class="toc-text">3.4.1 管道Pipe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97mq"><span class="toc-text">3.4.2 消息队列MQ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98"><span class="toc-text">3.4.3 共享内存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E9%87%8F"><span class="toc-text">3.4.4 信号量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E8%BF%9B%E7%A8%8B%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.5 其它进程类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B%E6%97%A0%E5%AE%B3%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%9B%9E%E6%94%B6"><span class="toc-text">3.5.1 孤儿进程：无害（会自动回收）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E6%9C%89%E5%8D%B1%E5%AE%B3"><span class="toc-text">3.5.2 僵尸进程：有危害</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B"><span class="toc-text">3.5.3 守护进程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98"><span class="toc-text">3.6 多线程同步问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%9C%80%E8%A6%81%E5%90%8C%E6%AD%A5"><span class="toc-text">3.6.1 为什么多线程需要同步？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%90%8C%E6%AD%A5%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">3.6.2 实现同步的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%BB%E9%94%81%E9%97%AE%E9%A2%98"><span class="toc-text">3.6.3 死锁问题</span></a></li></ol></li></ol></li></ol>
            </div>
        
        <!-- sidebar -->
        <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
        <div class="sidebar-panel-archives">
    <!-- 在 ejs 中将 archive 按照时间排序 -->
    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 57
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
        
            
            
            <div class="archive-year"> 2025 </div>
            <ul class="year-list">
            
        
        <li class="archive-post-item">
            <span class="archive-post-date">01/02</span>
            <a class="archive-post-title" href="/2025/01/02/%E6%8E%A8%E5%B9%BF%E6%90%9C%E5%9B%9B%EF%BC%9A%E4%BC%A0%E7%BB%9F%E6%8E%A8%E8%8D%90%E6%A8%A1%E5%9E%8B%E4%B9%8BFM%E6%A8%A1%E5%9E%8B/">推广搜四：传统推荐模型之FM模型</a>
        </li>
    
        
            
            
                
                </ul>
            
            <div class="archive-year"> 2024 </div>
            <ul class="year-list">
            
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/25</span>
            <a class="archive-post-title" href="/2024/12/25/%E6%8E%A8%E5%B9%BF%E6%90%9C%E4%B8%89%EF%BC%9A%E4%BC%A0%E7%BB%9F%E6%8E%A8%E8%8D%90%E6%A8%A1%E5%9E%8B%E4%B9%8B%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92%E7%AE%97%E6%B3%95LR/">推广搜三：传统推荐模型之逻辑回归算法LR</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/24</span>
            <a class="archive-post-title" href="/2024/12/24/%E6%8E%A8%E5%B9%BF%E6%90%9C%E4%BA%8C%EF%BC%9A%E4%BC%A0%E7%BB%9F%E6%8E%A8%E8%8D%90%E6%A8%A1%E5%9E%8B%E4%B9%8B%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E7%AE%97%E6%B3%95/">推广搜二：传统推荐模型之协同过滤算法</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/20</span>
            <a class="archive-post-title" href="/2024/12/20/%E6%8E%A8%E5%B9%BF%E6%90%9C%E4%B8%80%EF%BC%9A%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%8F%8A%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%E7%AF%87/">推广搜一：基础知识及学习路线篇</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/18</span>
            <a class="archive-post-title" href="/2024/12/18/%E7%88%AC%E8%99%AB%E5%AE%9E%E7%8E%B0QQ%E7%BE%A4%E4%BD%9C%E4%B8%9A%E7%9A%84%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD/">爬虫实现QQ群作业的批量下载</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">11/25</span>
            <a class="archive-post-title" href="/2024/11/25/%E6%89%8B%E5%86%99%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F1%EF%BC%9A%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/">手写操作系统1：项目环境部署</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/23</span>
            <a class="archive-post-title" href="/2024/10/23/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%B1%82/">计算机网络层</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">10/21</span>
            <a class="archive-post-title" href="/2024/10/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%82/">计算机网络传输层</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">09/21</span>
            <a class="archive-post-title" href="/2024/09/21/Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/">Redis数据库学习</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">09/16</span>
            <a class="archive-post-title" href="/2024/09/16/Asyncflow%E9%A1%B9%E7%9B%AE6%EF%BC%9Aworker%E5%BC%80%E5%8F%91/">Asyncflow项目6：worker开发</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">09/14</span>
            <a class="archive-post-title" href="/2024/09/14/Asyncflow%E9%A1%B9%E7%9B%AE5%EF%BC%9Aflowsvr%E5%BC%80%E5%8F%91/">Asyncflow项目5：flowsvr开发</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">08/18</span>
            <a class="archive-post-title" href="/2024/08/18/Asyncflow%E9%A1%B9%E7%9B%AE4%EF%BC%9AWorker%E7%9A%84%E8%AE%BE%E8%AE%A1/">Asyncflow项目4：Worker的设计</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">08/05</span>
            <a class="archive-post-title" href="/2024/08/05/%E5%88%86%E5%B8%83%E5%BC%8FKafka%E5%AD%A6%E4%B9%A0/">分布式Kafka学习</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/15</span>
            <a class="archive-post-title" href="/2024/07/15/Asyncflow%E9%A1%B9%E7%9B%AE2%EF%BC%9A%E6%95%B4%E4%BD%93%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/">Asyncflow项目2：整体设计思路</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">07/15</span>
            <a class="archive-post-title" href="/2024/07/15/Asyncflow%E9%A1%B9%E7%9B%AE3%EF%BC%9AFlowSvr%E7%9A%84%E8%AE%BE%E8%AE%A1/">Asyncflow项目3：FlowSvr的设计</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">06/14</span>
            <a class="archive-post-title" href="/2024/06/14/Asyncflow%E9%A1%B9%E7%9B%AE1%EF%BC%9A%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/">Asyncflow项目1：环境部署</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/18</span>
            <a class="archive-post-title" href="/2024/05/18/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3%E7%9A%84Linux%E6%93%8D%E4%BD%9C/">操作系统相关的Linux操作</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/18</span>
            <a class="archive-post-title" href="/2024/05/18/%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6/">文件描述符</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/17</span>
            <a class="archive-post-title" href="/2024/05/17/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">操作系统内存管理</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/15</span>
            <a class="archive-post-title" href="/2024/05/15/%E5%A4%A7%E9%A1%B6%E5%A0%86-%E5%B0%8F%E9%A1%B6%E5%A0%86%EF%BC%88CPP%EF%BC%89/">大顶堆/小顶堆（CPP）</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">05/01</span>
            <a class="archive-post-title" href="/2024/05/01/%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">高并发系统设计</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/29</span>
            <a class="archive-post-title" href="/2024/04/29/KMP%E7%AE%97%E6%B3%95/">KMP算法</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/26</span>
            <a class="archive-post-title" href="/2024/04/26/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/">动态规划-背包问题</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/25</span>
            <a class="archive-post-title" href="/2024/04/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%8F%8A%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/">操作系统结构及进程管理</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/20</span>
            <a class="archive-post-title" href="/2024/04/20/C-%E5%BA%95%E5%B1%82%E5%AD%A6%E4%B9%A0/">C++底层学习</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/12</span>
            <a class="archive-post-title" href="/2024/04/12/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/">Mysql数据库学习</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/03</span>
            <a class="archive-post-title" href="/2024/04/03/%E6%8E%92%E5%BA%8F%E5%AE%9E%E7%8E%B0/">排序实现</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/27</span>
            <a class="archive-post-title" href="/2024/03/27/WebServer%E5%AD%A6%E4%B9%A09%EF%BC%9AWebBench%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/">WebServer学习9：WebBench压力测试</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/27</span>
            <a class="archive-post-title" href="/2024/03/27/WebServer%E5%AD%A6%E4%B9%A08%EF%BC%9A%E9%80%9A%E7%94%A8%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E8%AE%A1/">WebServer学习8：通用日志系统的设计</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/26</span>
            <a class="archive-post-title" href="/2024/03/26/WebServer%E5%AD%A6%E4%B9%A07%EF%BC%9A%E5%AE%9A%E6%97%B6%E5%99%A8%E6%8E%A7%E5%88%B6%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%98%E6%B4%BB%E6%97%B6%E9%97%B4/">WebServer学习7：定时器控制客户端存活时间</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/11</span>
            <a class="archive-post-title" href="/2024/03/11/WebServer%E5%AD%A6%E4%B9%A06%EF%BC%9AHTTP%E8%BF%9E%E6%8E%A5%E5%A4%84%E7%90%86%E5%8F%8A%E6%8A%A5%E6%96%87%E6%9C%BA%E5%88%B6/">WebServer学习6：HTTP连接处理及报文机制</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/09</span>
            <a class="archive-post-title" href="/2024/03/09/HTTP%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%BF%AD%E4%BB%A3/">HTTP协议的迭代（HTTP：应用层）</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/09</span>
            <a class="archive-post-title" href="/2024/03/09/C-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0/">C++基础知识学习</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/09</span>
            <a class="archive-post-title" href="/2024/03/09/WebServer%E5%AD%A6%E4%B9%A05%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E8%AE%BE%E8%AE%A1/">WebServer学习5：线程池与数据库连接池设计</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/05</span>
            <a class="archive-post-title" href="/2024/03/05/WebServer%E5%AD%A6%E4%B9%A04%EF%BC%9A%E5%B9%B6%E5%8F%91%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%BC%8FReactor%E5%92%8CProactor/">WebServer学习4：并发事件驱动模式Reactor和Proactor</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/04</span>
            <a class="archive-post-title" href="/2024/03/04/WebServer%E5%AD%A6%E4%B9%A03%EF%BC%9Asocket%E7%BC%96%E7%A8%8B%E4%B8%8Eepoll%E5%AE%9E%E7%8E%B0I-O%E5%A4%8D%E7%94%A8/">WebServer学习3：socket编程与epoll实现I/O复用</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/03</span>
            <a class="archive-post-title" href="/2024/03/03/WebServer%E5%AD%A6%E4%B9%A02%EF%BC%9A%E4%BB%8EConfig%E6%96%87%E4%BB%B6%E4%BA%86%E8%A7%A3Makefile%E7%BC%96%E8%AF%91/">WebServer学习2：从Config文件了解Makefile编译</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/28</span>
            <a class="archive-post-title" href="/2024/02/28/WebServer%E5%AD%A6%E4%B9%A01%EF%BC%9A%E9%83%A8%E7%BD%B2%E8%BF%90%E8%A1%8C/">WebServer学习1：部署运行</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/10</span>
            <a class="archive-post-title" href="/2024/02/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F6%EF%BC%9A%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/">设计模式6：策略模式</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/10</span>
            <a class="archive-post-title" href="/2024/02/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F5%EF%BC%9A%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95/">设计模式5：模板方法</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/08</span>
            <a class="archive-post-title" href="/2024/02/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F0%EF%BC%9A%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1%E7%9A%848%E5%A4%A7%E8%AE%BE%E8%AE%A1%E5%8E%9F%E7%90%86/">设计模式0：面对对象的8大设计原理</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/07</span>
            <a class="archive-post-title" href="/2024/02/07/%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%88C++%EF%BC%89/">从0开始实现线程池(C++)</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/02</span>
            <a class="archive-post-title" href="/2024/02/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F4%EF%BC%9A%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/">设计模式4：代理模式(C++)</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/02</span>
            <a class="archive-post-title" href="/2024/02/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F3%EF%BC%9A%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/">设计模式3：抽象工厂模式(C++)</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/02</span>
            <a class="archive-post-title" href="/2024/02/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F2%EF%BC%9A%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/">设计模式2：工厂方法模式(C++)</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">01/26</span>
            <a class="archive-post-title" href="/2024/01/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F1%EF%BC%9A%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">设计模式1：单例模式(C++)</a>
        </li>
    
        
            
            
                
                </ul>
            
            <div class="archive-year"> 2023 </div>
            <ul class="year-list">
            
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/18</span>
            <a class="archive-post-title" href="/2023/03/18/QT%E7%BC%96%E7%A8%8B%E7%BB%8F%E9%AA%8C/">QT编程经验</a>
        </li>
    
        
            
            
                
                </ul>
            
            <div class="archive-year"> 2022 </div>
            <ul class="year-list">
            
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/08</span>
            <a class="archive-post-title" href="/2022/12/08/SolveProgramLearningProblem/">SolveProgramLearningProblem</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">12/04</span>
            <a class="archive-post-title" href="/2022/12/04/Mine-%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F%E5%90%8E%E8%BD%AF%E4%BB%B6%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/">Mine-重装系统后软件相关设置</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">11/24</span>
            <a class="archive-post-title" href="/2022/11/24/%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%96%B9%E5%BC%8F%E6%95%B4%E7%90%86/">快捷键方式整理</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">11/15</span>
            <a class="archive-post-title" href="/2022/11/15/LOVE/">LOVE_打火机与公主裙</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/17</span>
            <a class="archive-post-title" href="/2022/04/17/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A001/">动手学深度学习01</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">04/12</span>
            <a class="archive-post-title" href="/2022/04/12/%E6%90%AD%E5%BB%BAConda%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/">搭建Conda虚拟环境</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">03/13</span>
            <a class="archive-post-title" href="/2022/03/13/%E9%83%A8%E7%BD%B2colab%E5%88%A9%E7%94%A8GPU%E8%B5%84%E6%BA%90%E8%AE%AD%E7%BB%83%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B/">部署colab利用GPU资源训练深度学习模型</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/03</span>
            <a class="archive-post-title" href="/2022/02/03/%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F%E5%90%8EHexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/">重装系统后Hexo博客部署教程</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/03</span>
            <a class="archive-post-title" href="/2022/02/03/VScode-Anaconda-Pycharm-JDK%E7%9A%84Python%E5%92%8CJava%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/">VScode+Anaconda+Pycharm+JDK的Python和Java环境配置</a>
        </li>
    
        
        <li class="archive-post-item">
            <span class="archive-post-date">02/03</span>
            <a class="archive-post-title" href="/2022/02/03/DELL%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A3%85%E6%95%99%E7%A8%8B/">DELL系统重装教程</a>
        </li>
    
    </div>
</div>

        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
        
            <span class="sidebar-tag-name" data-tags="计算机">
                <span class="iconfont-archer">&#xe606;</span>
                计算机
            </span>
        
            <span class="sidebar-tag-name" data-tags="杂货铺-休闲">
                <span class="iconfont-archer">&#xe606;</span>
                杂货铺-休闲
            </span>
        
            <span class="sidebar-tag-name" data-tags="环境配置">
                <span class="iconfont-archer">&#xe606;</span>
                环境配置
            </span>
        
            <span class="sidebar-tag-name" data-tags="深度学习">
                <span class="iconfont-archer">&#xe606;</span>
                深度学习
            </span>
        
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
        缺失模块，请参考主题文档进行安装配置：https://github.com/fi3ework/hexo-theme-archer#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98
    </div> 
    <div class="sidebar-tags-list"></div>
</div>

        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
        <span class="sidebar-category-name" data-categories="Asyncflow">
            <span class="iconfont-archer">&#xe60a;</span>
            Asyncflow
        </span>
    
        <span class="sidebar-category-name" data-categories="C++知识点">
            <span class="iconfont-archer">&#xe60a;</span>
            C++知识点
        </span>
    
        <span class="sidebar-category-name" data-categories="计算机网络">
            <span class="iconfont-archer">&#xe60a;</span>
            计算机网络
        </span>
    
        <span class="sidebar-category-name" data-categories="重装-环境配置-计算机">
            <span class="iconfont-archer">&#xe60a;</span>
            重装-环境配置-计算机
        </span>
    
        <span class="sidebar-category-name" data-categories="数据结构与算法">
            <span class="iconfont-archer">&#xe60a;</span>
            数据结构与算法
        </span>
    
        <span class="sidebar-category-name" data-categories="数据库">
            <span class="iconfont-archer">&#xe60a;</span>
            数据库
        </span>
    
        <span class="sidebar-category-name" data-categories="WebServer项目（C++）">
            <span class="iconfont-archer">&#xe60a;</span>
            WebServer项目（C++）
        </span>
    
        <span class="sidebar-category-name" data-categories="系统设计">
            <span class="iconfont-archer">&#xe60a;</span>
            系统设计
        </span>
    
        <span class="sidebar-category-name" data-categories="深度学习算法">
            <span class="iconfont-archer">&#xe60a;</span>
            深度学习算法
        </span>
    
        <span class="sidebar-category-name" data-categories="操作系统">
            <span class="iconfont-archer">&#xe60a;</span>
            操作系统
        </span>
    
        <span class="sidebar-category-name" data-categories="设计模式">
            <span class="iconfont-archer">&#xe60a;</span>
            设计模式
        </span>
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>

    </div>
</div>

        <!-- site-meta -->
        <script>
    var siteMetaRoot = "/"
    if (siteMetaRoot === "undefined") {
        siteMetaRoot = '/'
    }
    var siteMeta = {
        url: "https://AkiraZheng.github.io",
        root: siteMetaRoot,
        author: "AkiraZheng"
    }
</script>

        <!-- import experimental options here -->
        <!-- Custom Font -->


        <!-- main func -->
        <script src="/scripts/main.js?v=20211217"></script>
        <!-- dark mode -->
        <script src="/scripts/dark.js?v=20211217"></script>
        <!-- fancybox -->
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" defer></script>
        <!-- algolia -->
        
        <!-- busuanzi -->
        
            <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
        
        <!-- CNZZ -->
        
        <!-- async load share.js -->
        
            <script src="/scripts/share.js?v=20211217" async></script>
        
        <!-- mermaid -->
        
    </body>
</html>
